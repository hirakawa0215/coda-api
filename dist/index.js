var t,e=(t=require("axios"))&&"object"==typeof t&&"default"in t?t.default:t;function r(t,e){try{var r=t()}catch(t){return e(t)}return r&&r.then?r.then(void 0,e):r}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var o=function(t){e.defaults.baseURL="https://coda.io/apis/v1beta1",e.defaults.headers.common.Authorization="Bearer "+t};o.prototype.request=function(t,o,n){void 0===o&&(o={}),void 0===n&&(n="GET");try{return Promise.resolve(r(function(){var r=["POST","PUT","PATCH"].includes(n.toUpperCase())?{url:t,method:n,data:o}:{url:t,method:n,params:o};return Promise.resolve(e(r))},function(t){console.error(t)}))}catch(t){return Promise.reject(t)}},o.prototype.deleteWithBody=function(t,o){void 0===o&&(o={});try{return Promise.resolve(r(function(){return Promise.resolve(e({url:t,method:"DELETE",data:o}))},function(t){console.error(t)}))}catch(t){return Promise.reject(t)}};var n=function(t,e){this.API=t,Object.assign(this,e)};n.prototype.listSections=function(t){try{var e=this;return Promise.resolve(e.API.request("/docs/"+e.id+"/sections",t)).then(function(t){return t.data.items.map(function(t){return new a(Object.assign({},t,{docId:e.id}))})})}catch(t){return Promise.reject(t)}},n.prototype.getSection=function(t){try{var e=this;return Promise.resolve(e.API.request("/docs/"+e.id+"/sections/"+t)).then(function(t){return new a(Object.assign({},t.data,{docId:e.id}))})}catch(t){return Promise.reject(t)}},n.prototype.listFolders=function(t){try{var e=this;return Promise.resolve(e.API.request("/docs/"+e.id+"/folders",t)).then(function(t){return t.data.items.map(function(t){return new d(Object.assign({},t,{docId:e.id}))})})}catch(t){return Promise.reject(t)}},n.prototype.getFolder=function(t){try{var e=this;return Promise.resolve(e.API.request("/docs/"+e.id+"/folders/"+t)).then(function(t){return new d(Object.assign({},t.data,{docId:e.id}))})}catch(t){return Promise.reject(t)}},n.prototype.listTables=function(){try{var t=this;return Promise.resolve(t.API.request("/docs/"+t.id+"/tables")).then(function(e){return e.data.items.map(function(e){return new u(t.API,Object.assign({},e,{docId:t.id}))})})}catch(t){return Promise.reject(t)}},n.prototype.getTable=function(t){try{var e=this;return Promise.resolve(e.API.request("/docs/"+e.id+"/tables/"+t)).then(function(t){return new u(e.API,Object.assign({},t.data,{docId:e.id}))})}catch(t){return Promise.reject(t)}};var s=function(t){Object.assign(this,t)},i=function(t){if(!Array.isArray(t))throw new Error("`rows` must be an array");if(!t.length)throw new Error("Must include at least one row when calling `insertRows`");return t.map(function(t){if(Array.isArray(t)){if(t.some(function(t){return t.hasOwnProperty("column")&&t.hasOwnProperty("value")}))return{cells:t};throw new Error("A row must either be an array of objects for each column, or else one object of column/value pairs..")}var e=[];return Object.keys(t).forEach(function(r){e.push({column:r,value:t[r]})}),{cells:e}})},c=function(t,e){this.API=t,Object.assign(this,e)};c.prototype.listValues=function(){var t=this,e=[];return Object.keys(this.values).forEach(function(r){e.push({column:r,value:t.values[r]})}),e},c.prototype.update=function(t){try{var e=i([t]);return Promise.resolve(this.API.request("/docs/"+this.docId+"/tables/"+this.tableId+"/rows/"+this.id,{row:e[0]},"PUT")).then(function(t){return 202===t.status})}catch(t){return Promise.reject(t)}},c.prototype.delete=function(){try{return Promise.resolve(this.API.request("/docs/"+this.docId+"/tables/"+this.tableId+"/rows/"+this.id,{},"DELETE")).then(function(t){return 202===t.status})}catch(t){return Promise.reject(t)}};var u=function(t,e){this.API=t,Object.assign(this,e)};u.prototype.listColumns=function(t){try{var e=this;return Promise.resolve(e.API.request("/docs/"+e.docId+"/tables/"+e.id+"/columns",t)).then(function(t){return t.data.items.map(function(t){return new s(Object.assign({},t,{docId:e.docId,tableId:e.id}))})})}catch(t){return Promise.reject(t)}},u.prototype.getColumn=function(t){try{var e=this;return Promise.resolve(e.API.request("/docs/"+e.docId+"/tables/"+e.id+"/columns/"+t)).then(function(t){return new s(Object.assign({},t.data,{docId:e.docId,tableId:e.id}))})}catch(t){return Promise.reject(t)}},u.prototype.listRows=function(t){try{var e=this;return Promise.resolve(e.API.request("/docs/"+e.docId+"/tables/"+e.id+"/rows",t)).then(function(t){return t.data.items.map(function(t){return new c(e.API,Object.assign({},t,{docId:e.docId,tableId:e.id}))})})}catch(t){return Promise.reject(t)}},u.prototype.listRowsPaginatedByToken=function(t){try{var e=this;return Promise.resolve(e.API.request("/docs/"+e.docId+"/tables/"+e.id+"/rows",t)).then(function(t){var r=t.data;return{items:r.items.map(function(t){return new c(e.API,Object.assign({},t,{docId:e.docId,tableId:e.id}))}),token:r.nextPageToken}})}catch(t){return Promise.reject(t)}},u.prototype.getRow=function(t,e){try{var r=this;return Promise.resolve(r.API.request("/docs/"+r.docId+"/tables/"+r.id+"/rows/"+t,e)).then(function(t){return new c(r.API,Object.assign({},t.data,{docId:r.docId,tableId:r.id}))})}catch(t){return Promise.reject(t)}},u.prototype.insertRows=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]);try{var r=i(t);return Promise.resolve(this.API.request("/docs/"+this.docId+"/tables/"+this.id+"/rows",{rows:r,keyColumns:e},"POST")).then(function(t){return 202===t.status})}catch(t){return Promise.reject(t)}},u.prototype.updateRow=function(t,e){try{var r=i([e]);return Promise.resolve(this.API.request("/docs/"+this.docId+"/tables/"+this.id+"/rows/"+t,{row:r[0]},"PUT")).then(function(t){return 202===t.status})}catch(t){return Promise.reject(t)}},u.prototype.deleteRow=function(t){try{return Promise.resolve(this.API.request("/docs/"+this.docId+"/tables/"+this.id+"/rows/"+t,{},"DELETE")).then(function(t){return 202===t.status})}catch(t){return Promise.reject(t)}},u.prototype.deleteRows=function(t){try{return Promise.resolve(this.API.deleteWithBody("/docs/"+this.docId+"/tables/"+this.id+"/rows",{rowIds:t})).then(function(t){return 202===t.status})}catch(t){return Promise.reject(t)}};var a=function(t){Object.assign(this,t)},d=function(t){Object.assign(this,t)},l=function(t){this.API=new o(t)};l.prototype.whoAmI=function(){try{return Promise.resolve(this.API.request("/whoami")).then(function(t){return t.data})}catch(t){return Promise.reject(t)}},l.prototype.listDocs=function(t){void 0===t&&(t={});try{var e=this;return Promise.resolve(e.API.request("/docs",t)).then(function(t){return t.data.items.map(function(t){return new n(e.API,t)})})}catch(t){return Promise.reject(t)}},l.prototype.getDoc=function(t){try{var e=this;return Promise.resolve(e.API.request("/docs/"+t)).then(function(t){return new n(e.API,t.data)})}catch(t){return Promise.reject(t)}},l.prototype.listSections=function(t,e){try{return Promise.resolve(this.API.request("/docs/"+t+"/sections",e)).then(function(e){return e.data.items.map(function(e){return new a(Object.assign({},e,{docId:t}))})})}catch(t){return Promise.reject(t)}},l.prototype.getSection=function(t,e){try{return Promise.resolve(this.API.request("/docs/"+t+"/sections/"+e)).then(function(e){return new a(Object.assign({},e.data,{docId:t}))})}catch(t){return Promise.reject(t)}},l.prototype.listFolders=function(t,e){try{return Promise.resolve(this.API.request("/docs/"+t+"/folders",e)).then(function(e){return e.data.items.map(function(e){return new d(Object.assign({},e,{docId:t}))})})}catch(t){return Promise.reject(t)}},l.prototype.getFolder=function(t,e){try{return Promise.resolve(this.API.request("/docs/"+t+"/folders/"+e)).then(function(e){return new d(Object.assign({},e.data,{docId:t}))})}catch(t){return Promise.reject(t)}},l.prototype.listTables=function(t){try{var e=this;return Promise.resolve(e.API.request("/docs/"+t+"/tables")).then(function(r){return r.data.items.map(function(r){return new u(e.API,Object.assign({},r,{docId:t}))})})}catch(t){return Promise.reject(t)}},l.prototype.getTable=function(t,e){try{var r=this;return Promise.resolve(r.API.request("/docs/"+t+"/tables/"+e)).then(function(e){return new u(r.API,Object.assign({},e.data,{docId:t}))})}catch(t){return Promise.reject(t)}},l.prototype.listColumns=function(t,e,r){try{return Promise.resolve(this.API.request("/docs/"+t+"/tables/"+e+"/columns",r)).then(function(r){return r.data.items.map(function(r){return new s(Object.assign({},r,{docId:t,tableId:e}))})})}catch(t){return Promise.reject(t)}},l.prototype.getColumn=function(t,e,r){try{return Promise.resolve(this.API.request("/docs/"+t+"/tables/"+e+"/columns/"+r)).then(function(r){return new s(Object.assign({},r.data,{docId:t,tableId:e}))})}catch(t){return Promise.reject(t)}},l.prototype.listRows=function(t,e,r){try{var o=this;return Promise.resolve(o.API.request("/docs/"+t+"/tables/"+e+"/rows",r)).then(function(r){return r.data.items.map(function(r){return new c(o.API,Object.assign({},r,{docId:t,tableId:e}))})})}catch(t){return Promise.reject(t)}},l.prototype.getRow=function(t,e,r,o){try{var n=this;return Promise.resolve(n.API.request("/docs/"+t+"/tables/"+e+"/rows/"+r,o)).then(function(r){return new c(n.API,Object.assign({},r.data,{docId:t,tableId:e}))})}catch(t){return Promise.reject(t)}},l.prototype.insertRows=function(t,e,r,o){void 0===r&&(r=[]),void 0===o&&(o=[]);try{var n=i(r);return Promise.resolve(this.API.request("/docs/"+t+"/tables/"+e+"/rows",{rows:n,keyColumns:o},"POST")).then(function(t){return 202===t.status})}catch(t){return Promise.reject(t)}},l.prototype.updateRow=function(t,e,r,o){try{var n=i([o]);return Promise.resolve(this.API.request("/docs/"+t+"/tables/"+e+"/rows/"+r,{row:n[0]},"PUT")).then(function(t){return 202===t.status})}catch(t){return Promise.reject(t)}},l.prototype.deleteRow=function(t,e,r){try{return Promise.resolve(this.API.request("/docs/"+t+"/tables/"+e+"/rows/"+r,{},"DELETE")).then(function(t){return 202===t.status})}catch(t){return Promise.reject(t)}},l.prototype.deleteRows=function(t,e,r){try{return Promise.resolve(this.API.deleteWithBody("/docs/"+t+"/tables/"+e+"/rows",{rowIds:r})).then(function(t){return 202===t.status})}catch(t){return Promise.reject(t)}},module.exports=l;
//# sourceMappingURL=index.js.map
